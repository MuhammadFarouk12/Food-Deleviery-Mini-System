generator client {
  provider        = "prisma-client-js"
  output          = "../generated/prisma"
  previewFeatures = ["views"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model dishes {
  dish_id    Int      @id(map: "dish_pk") @default(autoincrement())
  dish_name  String   @unique(map: "dish_unique") @db.VarChar
  dish_price Decimal? @db.Decimal
  orders     orders[]
}

model orders {
  order_id Int     @id @default(autoincrement())
  user_id  Int?
  dish_id  Int?
  dishes   dishes? @relation(fields: [dish_id], references: [dish_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_order_dish")
  users    users?  @relation(fields: [user_id], references: [user_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_order_user")
}

model users {
  user_id       Int      @id(map: "usres_pk") @default(autoincrement())
  user_name     String   @unique(map: "usres_unique") @db.VarChar
  user_password String   @db.VarChar(60)
  is_admin      Boolean?
  orders        orders[]
}

view orders_join {
  order_id   Int?
  user_name  String?  @db.VarChar
  dish_name  String?  @db.VarChar
  dish_price Decimal? @db.Decimal
}
